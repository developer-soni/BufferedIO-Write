# BufferedIO-Write

In this program we build the BufferedIO project further by adding a b_write function using system call APIs and handles buffered IO. The b_write takes a file descriptor, a buffer and the number of bytes to be written. It also only writes in 512 bytes of chunks at a time by copying from the caller’s buffer to my own buffer. The return value from this function is the number of bytes transferred from the caller’s buffer. In the b_write function first we initialize the buffer and check if the file descriptor is within 0 and (MAXFCBS-1). The function accepts the data and the number of bytes provided and using the Linux System Calls, buffers the data in 512 byte chunks and writes in the same chunk size too. First we check that our buffer and count doesn’t exceed the chunk size given. Then we copy these number of bytes into our buffer. Then we adjust the buffer length and its index to set the number of bytes copied. If our buffer is nearly full but not completely, then the number of bytes to copy is divided into parts and the same actions are performed sequentially. But if our buffer is completely full, then we write to file in the given chunk size i.e 512 bytes. Now, if our buffer and count exceed the chunk size given, then we directly copy the first part into our buffer and directly write to the file in 512 bytes. Then we calculate the bytes remaining after first write and the next write amount. Again we write to file directly from the caller’s buffer in blocks*512 bytes. Now again, we calculate the remaining bytes after this second write. Finally we return the number of characters actually written. The remaining parts of the code are same as in the BufferedIO project because we are only adding b_write function to write our buffer into a separate file and that is Clean.txt.

Please refer to WriteUp for more information.
